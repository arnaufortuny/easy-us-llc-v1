import{j as e}from"./vendor-rACX9Y5t.js";import{a as n,am as h,an as f,s as j}from"./ui-BDRs75dM.js";import{u as b,F as g,t as N,o as y,s as c}from"./form-M2Lmc_rb.js";import{u as v,c as w,N as S,L as l,B as E,F as L,d as k,q as C}from"./index-BntbxnjR.js";import{F as m}from"./form-input-DLGF9M97.js";import"./textarea-DVwqEWyZ.js";import"./select-CedkWkUp.js";import"./checkbox-5T5Ny8FM.js";import"./label-ayG7TYde.js";const F=y({email:c().email("Email inválido"),password:c().min(1,"Contraseña requerida")});function K(){const[,d]=v(),[t,r]=n.useState(!1),[s,u]=n.useState(!1),{toast:i}=w(),a=b({resolver:N(F),defaultValues:{email:"",password:""}}),x=async p=>{r(!0);try{(await(await k("POST","/api/auth/login",p)).json()).success&&(await C.refetchQueries({queryKey:["/api/auth/user"]}),i({title:"Sesión iniciada",variant:"success"}),d("/dashboard"))}catch(o){i({title:"Error",description:o.message||"Email o contraseña incorrectos",variant:"destructive"})}finally{r(!1)}};return e.jsxs("div",{className:"min-h-screen bg-background font-sans",children:[e.jsx(S,{}),e.jsx("main",{className:"pt-24 pb-16 px-4 flex flex-col items-center justify-center min-h-[80vh]",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl font-black text-primary tracking-tight",children:["Iniciar ",e.jsx("span",{className:"text-accent",children:"Sesión"})]}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Accede a tu área de cliente"})]}),e.jsxs("div",{children:[e.jsx(g,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(x),className:"space-y-6",children:[e.jsx(m,{control:a.control,name:"email",label:"Email",type:"email",inputMode:"email",placeholder:"tu@email.com"}),e.jsxs("div",{className:"relative",children:[e.jsx(m,{control:a.control,name:"password",label:"Contraseña",type:s?"text":"password",placeholder:"Tu contraseña"}),e.jsx("button",{type:"button",onClick:()=>u(!s),className:"absolute right-4 top-[42px] text-muted-foreground hover:text-primary transition-colors","aria-label":s?"Ocultar contraseña":"Mostrar contraseña",children:s?e.jsx(h,{className:"w-5 h-5"}):e.jsx(f,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"text-right",children:e.jsx(l,{href:"/forgot-password",children:e.jsx("span",{className:"text-sm font-medium text-accent hover:underline cursor-pointer",children:"¿Olvidaste tu contraseña?"})})}),e.jsx(E,{type:"submit",disabled:t,className:"w-full bg-[#6EDC8A] text-primary font-black py-7 rounded-full text-lg shadow-lg shadow-[#6EDC8A]/20 active:scale-95 transition-all","data-testid":"button-login",children:t?e.jsx(j,{className:"animate-spin"}):"Iniciar Sesión"})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-muted-foreground text-sm",children:["¿No tienes cuenta?"," ",e.jsx(l,{href:"/register",children:e.jsx("span",{className:"font-black text-primary hover:text-accent transition-colors cursor-pointer",children:"Regístrate"})})]})})]})]})}),e.jsx(L,{})]})}export{K as default};
