import{a as i,j as e,i as z,E as U,l as K,$ as Q}from"./react-core-DkWXFmuS.js";import{a as Y,t as _}from"./forms-DPfMMjh0.js";import{u as $,N as T,L as g,F as P,b as j,q as I}from"./index-CWx0gCjU.js";import{u as G,I as o,B as c,S as H,F as J,d,e as l,f as m,g as x,i as u,h as W}from"./ui-components-DKKU6jgR.js";import{S as X}from"./social-login-CZd12qR4.js";import{o as Z,s as p}from"./validation-D376FIhw.js";import"./react-dom-BybFfvUU.js";import"./i18n-Czt3Ol_y.js";import"./tanstack-wXeEfay9.js";import"./radix-ui-kO3FXNWk.js";const ee=Z({firstName:p().min(1,"Este campo es obligatorio"),lastName:p().min(1,"Este campo es obligatorio"),email:p().email("Introduce un email v치lido"),phone:p().min(6,"Este campo es obligatorio"),businessActivity:p().optional(),password:p().min(8,"La contrase침a debe tener al menos 8 caracteres"),confirmPassword:p()}).refine(b=>b.password===b.confirmPassword,{message:"Las contrase침as no coinciden",path:["confirmPassword"]}),se=["E-commerce / Tienda online","Dropshipping","Consultor칤a / Servicios profesionales","Marketing digital / Agencia","Desarrollo de software / IT","Inversiones / Trading","Bienes ra칤ces / Real estate","Importaci칩n / Exportaci칩n","Coaching / Formaci칩n online","Creador de contenido / Influencer","Otro"],N=6;function ue(){const[,b]=$(),[t,v]=i.useState(0),[y,w]=i.useState(!1),[h,A]=i.useState(!1),[L,V]=i.useState(!1),[f,F]=i.useState(""),[k,C]=i.useState(!1),[S,E]=i.useState(!1),{toast:n}=G(),a=Y({resolver:_(ee),defaultValues:{firstName:"",lastName:"",email:"",phone:"",businessActivity:"",password:"",confirmPassword:""}}),R={0:["firstName","lastName"],1:["email"],2:["phone"],3:[],4:["password","confirmPassword"]},q=async()=>{const s=R[t]||[];await a.trigger(s)&&t<N-1&&v(t+1)},M=()=>{t>0&&v(t-1)},O=async s=>{w(!0);try{(await(await j("POST","/api/auth/register",{firstName:s.firstName,lastName:s.lastName,email:s.email,phone:s.phone,businessActivity:s.businessActivity||null,password:s.password})).json()).success&&(await I.refetchQueries({queryKey:["/api/auth/user"]}),V(!0),n({title:"Cuenta creada",description:"Te hemos enviado un c칩digo para confirmar tu email"}))}catch(r){n({title:"Error",description:r.message||"Error al crear la cuenta",variant:"destructive"})}finally{w(!1)}},B=async()=>{if(!f||f.length<6){n({title:"Falta el c칩digo",description:"Introduce el c칩digo de 6 d칤gitos",variant:"destructive"});return}C(!0);try{(await(await j("POST","/api/auth/verify-email",{code:f})).json()).success&&(await I.refetchQueries({queryKey:["/api/auth/user"]}),n({title:"Email verificado",description:"Perfecto. Ya puedes continuar"}),b("/dashboard"))}catch{n({title:"C칩digo incorrecto",description:"El c칩digo no es v치lido o ha caducado",variant:"destructive"})}finally{C(!1)}},D=async()=>{E(!0);try{await j("POST","/api/auth/resend-verification"),n({title:"C칩digo enviado",description:"Revisa tu correo, te esperamos aqu칤"})}catch{n({title:"Error",description:"No se pudo enviar el c칩digo",variant:"destructive"})}finally{E(!1)}};return L?e.jsxs("div",{className:"min-h-screen bg-background bg-green-gradient-subtle font-sans",children:[e.jsx(T,{}),e.jsx("main",{className:"pt-24 pb-16 px-5 sm:px-6 flex flex-col items-center justify-center min-h-[80vh]",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("h1",{className:"text-2xl sm:text-3xl font-black text-primary tracking-tight",children:["Comprobaci칩n r치pida de ",e.jsx("span",{className:"text-accent",children:"seguridad"})]}),e.jsx("p",{className:"text-muted-foreground mt-3",children:"Vamos a verificar tu email para proteger tu cuenta."}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Te hemos enviado un c칩digo de verificaci칩n."})]}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl p-5 border border-border shadow-sm mb-6",children:[e.jsxs("div",{className:"space-y-2 text-sm text-foreground",children:[e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{children:"游녤"}),e.jsx("span",{children:"Revisa tu bandeja de entrada."})]}),e.jsxs("p",{className:"flex items-start gap-2",children:[e.jsx("span",{children:"游녤"}),e.jsx("span",{children:"Si no lo ves, comprueba tambi칠n SPAM o Promociones."})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-3",children:"Es solo un paso r치pido y seguimos."})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-black text-primary block mb-2",children:"C칩digo de verificaci칩n"}),e.jsx(o,{value:f,onChange:s=>F(s.target.value.replace(/\D/g,"")),className:"rounded-full h-12 text-center text-2xl font-black border-2 border-gray-200 dark:border-zinc-700 focus:border-accent tracking-[0.5em] bg-white dark:bg-zinc-800",maxLength:6,inputMode:"numeric",autoComplete:"one-time-code","data-testid":"input-verification-code"})]}),e.jsx(c,{onClick:B,disabled:k||f.length<6,size:"lg",className:"w-full bg-accent text-primary font-black rounded-full h-12","data-testid":"button-verify",children:k?e.jsx(z,{className:"animate-spin"}):"Verificar mi email"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"쯅o has recibido el c칩digo?"}),e.jsx(c,{variant:"link",onClick:D,disabled:S,className:"text-accent p-0 h-auto font-bold","data-testid":"button-resend-code",children:S?"Enviando...":"Reenviar c칩digo"})]}),e.jsxs("div",{className:"text-center pt-4 border-t border-gray-100 dark:border-zinc-700",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Puedes verificarlo m치s tarde desde tu 치rea de cliente"}),e.jsx(g,{href:"/dashboard",children:e.jsx(c,{variant:"outline",className:"rounded-full font-bold","data-testid":"button-verify-later",children:"Ir a mi nueva 치rea de cliente"})})]})]})]})}),e.jsx(P,{})]}):e.jsxs("div",{className:"min-h-screen bg-background bg-green-gradient-subtle font-sans",children:[e.jsx(T,{}),e.jsx("main",{className:"pt-20 md:pt-24 pb-12 md:pb-16 px-4 sm:px-6 flex flex-col items-center justify-center min-h-[80vh]",children:e.jsxs("div",{className:"w-full max-w-sm md:max-w-md",children:[e.jsxs("div",{className:"text-center mb-6 md:mb-8 flex flex-col items-center justify-center w-full",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-black tracking-tight text-center w-full",children:[e.jsx("span",{className:"text-foreground",children:"Crea tu"})," ",e.jsx("span",{className:"text-accent",children:"cuenta"})]}),e.jsx("p",{className:"text-accent font-semibold mt-2 text-sm md:text-base text-center",children:"Empieza en menos de 1 minuto"}),e.jsx("p",{className:"text-muted-foreground mt-2 text-sm md:text-base text-center max-w-xs md:max-w-sm",children:"Tu LLC en EE. UU., f치cil y acompa침ada."})]}),t>0&&e.jsx(H,{currentStep:t,totalSteps:N,className:"mb-6"}),e.jsxs("div",{className:"bg-white dark:bg-zinc-900 rounded-2xl md:rounded-3xl p-5 md:p-8 border border-border shadow-sm",children:[e.jsx(J,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(O),className:"space-y-4 md:space-y-5",children:[t===0&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("h2",{className:"text-base font-bold text-foreground",children:"쮺칩mo te llamas?"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"As칤 podremos dirigirnos a ti correctamente."})]}),e.jsx(d,{control:a.control,name:"firstName",render:({field:s})=>e.jsxs(l,{children:[e.jsx(m,{className:"text-xs md:text-sm font-bold text-foreground",children:"Nombre"}),e.jsx(x,{children:e.jsx(o,{...s,placeholder:"Escribe tu nombre",className:"rounded-full h-11 md:h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base placeholder:text-muted-foreground","data-testid":"input-firstName"})}),e.jsx(u,{})]})}),e.jsx(d,{control:a.control,name:"lastName",render:({field:s})=>e.jsxs(l,{children:[e.jsx(m,{className:"text-xs md:text-sm font-bold text-foreground",children:"Apellido"}),e.jsx(x,{children:e.jsx(o,{...s,placeholder:"Escribe tu apellido",className:"rounded-full h-11 md:h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base placeholder:text-muted-foreground","data-testid":"input-lastName"})}),e.jsx(u,{})]})})]},"step-0"),t===1&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-black text-primary",children:"Tu correo electr칩nico"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Lo usaremos para que puedas acceder a tu cuenta y recibir actualizaciones"})]}),e.jsx(d,{control:a.control,name:"email",render:({field:s})=>e.jsxs(l,{children:[e.jsx(m,{className:"font-black text-primary",children:"Correo electr칩nico"}),e.jsx(x,{children:e.jsx(o,{...s,type:"email",inputMode:"email",className:"rounded-full h-11 md:h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base placeholder:text-muted-foreground","data-testid":"input-email"})}),e.jsx(u,{})]})})]},"step-1"),t===2&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-black text-primary",children:"Tu tel칠fono"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Solo lo usaremos para contactarte si es necesario"})]}),e.jsx(d,{control:a.control,name:"phone",render:({field:s})=>e.jsxs(l,{children:[e.jsx(m,{className:"font-black text-primary",children:"N칰mero de tel칠fono con prefijo"}),e.jsx(x,{children:e.jsx(o,{...s,type:"tel",inputMode:"tel",className:"rounded-full h-11 md:h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base placeholder:text-muted-foreground","data-testid":"input-phone"})}),e.jsx(u,{})]})})]},"step-2"),t===3&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-black text-primary",children:"Tu actividad"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Opcional, pero nos ayuda a adaptar mejor el servicio a ti"})]}),e.jsx(d,{control:a.control,name:"businessActivity",render:({field:s})=>e.jsxs(l,{children:[e.jsx(m,{className:"text-xs md:text-sm font-bold text-foreground",children:"쮸 qu칠 te dedicas?"}),e.jsx(W,{className:"text-xs text-muted-foreground mb-2",children:"Elige la opci칩n que mejor describe tu negocio"}),e.jsx(x,{children:e.jsxs("select",{...s,className:"w-full rounded-full h-11 md:h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-accent/20","data-testid":"select-businessActivity",children:[e.jsx("option",{value:"",children:"Selecciona una opci칩n"}),se.map(r=>e.jsx("option",{value:r,children:r},r))]})}),e.jsx(u,{})]})})]},"step-3"),t===4&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-black text-primary",children:"Tu contrase침a"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Elige una contrase침a segura para proteger tu cuenta"})]}),e.jsx(d,{control:a.control,name:"password",render:({field:s})=>e.jsxs(l,{children:[e.jsx(m,{className:"font-black text-primary",children:"Contrase침a"}),e.jsx(x,{children:e.jsxs("div",{className:"relative",children:[e.jsx(o,{...s,type:h?"text":"password",autoComplete:"new-password",className:"rounded-full h-11 md:h-12 px-5 pr-12 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base placeholder:text-muted-foreground","data-testid":"input-password"}),e.jsx(c,{type:"button",variant:"ghost",size:"icon",onClick:()=>A(!h),className:"absolute right-2 top-1/2 -translate-y-1/2","aria-label":h?"Ocultar contrase침a":"Mostrar contrase침a","data-testid":"button-toggle-password",children:h?e.jsx(U,{className:"w-5 h-5"}):e.jsx(K,{className:"w-5 h-5"})})]})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"M칤nimo 8 caracteres"}),e.jsx(u,{})]})}),e.jsx(d,{control:a.control,name:"confirmPassword",render:({field:s})=>e.jsxs(l,{children:[e.jsx(m,{className:"font-black text-primary",children:"Confirmar contrase침a"}),e.jsx(x,{children:e.jsx(o,{...s,type:h?"text":"password",autoComplete:"new-password",className:"rounded-full h-11 md:h-12 px-5 border-2 border-gray-200 dark:border-zinc-700 focus:border-accent bg-white dark:bg-zinc-800 transition-all font-medium text-foreground text-base placeholder:text-muted-foreground","data-testid":"input-confirmPassword"})}),e.jsx(u,{})]})})]},"step-4"),t===5&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-black text-primary",children:"Confirmar registro"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Revisa tus datos antes de continuar"})]}),e.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 dark:bg-zinc-800 rounded-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-zinc-700",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Nombre"}),e.jsxs("span",{className:"font-medium text-primary",children:[a.getValues("firstName")," ",a.getValues("lastName")]})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-zinc-700",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Email"}),e.jsx("span",{className:"font-medium text-primary",children:a.getValues("email")})]}),e.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200 dark:border-zinc-700",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Tel칠fono"}),e.jsx("span",{className:"font-medium text-primary",children:a.getValues("phone")})]}),a.getValues("businessActivity")&&e.jsxs("div",{className:"flex justify-between items-center py-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Actividad"}),e.jsx("span",{className:"font-medium text-primary text-right max-w-[200px]",children:a.getValues("businessActivity")})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Al registrarte aceptas nuestros"," ",e.jsx(g,{href:"/legal/terminos","data-testid":"link-terms",children:e.jsx("span",{className:"text-accent underline cursor-pointer",children:"T칠rminos y Condiciones"})})," ","y"," ",e.jsx(g,{href:"/legal/privacidad","data-testid":"link-privacy",children:e.jsx("span",{className:"text-accent underline cursor-pointer",children:"Pol칤tica de Privacidad"})})]})]},"step-5"),e.jsxs("div",{className:"flex gap-3 pt-4",children:[t>0&&e.jsxs(c,{type:"button",variant:"outline",size:"lg",onClick:M,className:"flex-1 rounded-full font-black","data-testid":"button-prev",children:[e.jsx(Q,{className:"w-4 h-4 mr-2"}),"Volver"]}),t<N-1?e.jsx(c,{type:"button",onClick:q,className:"flex-1 bg-accent text-accent-foreground font-black rounded-full h-11 md:h-12 text-sm md:text-base shadow-lg shadow-accent/20","data-testid":"button-next",children:"Continuar"}):e.jsx(c,{type:"submit",disabled:y,className:"flex-1 bg-accent text-accent-foreground font-black rounded-full h-11 md:h-12 text-sm md:text-base shadow-lg shadow-accent/20","data-testid":"button-register",children:y?e.jsx(z,{className:"animate-spin"}):"Crear Cuenta"})]})]})}),t===0&&e.jsx("div",{className:"mt-6 pt-5 border-t border-border",children:e.jsx(X,{mode:"login"})}),e.jsx("div",{className:"mt-6 pt-5 border-t border-border text-center",children:e.jsx(g,{href:"/auth/login",children:e.jsxs("div",{className:"hover:underline cursor-pointer","data-testid":"link-login",children:[e.jsx("p",{className:"text-foreground text-xs md:text-sm font-bold",children:"쯏a tienes una cuenta?"}),e.jsx("p",{className:"text-accent text-[10px] md:text-xs",children:"Inicia sesi칩n aqu칤"})]})})})]})]})}),e.jsx(P,{})]})}export{ue as default};
